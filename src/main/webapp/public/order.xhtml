<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:p="http://xmlns.jcp.org/jsf/passthrough"
	xmlns:jsf="http://xmlns.jcp.org/jsf">
<h:head>
	<meta charset="utf-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1" />
	<meta http-equiv="X-UA-Conpatible" content="IE=edge" />
	<h:outputStylesheet library="css" name="bootstrap.min.css"></h:outputStylesheet>
	<title>Demo Web</title>
</h:head>
<h:body>
	<ui:composition template="template.xhtml">
		<div class="container">
			<ui:define name="container">
				<link href="https://fonts.googleapis.com/css?family=Pacifico"
					rel="stylesheet" />

				<div id="main" class="container-fluid">

					<h3 class="page-header">Adicionar Item</h3>

					<div>
						<h:form id="formulario" styleClass="form-horizontal">

							<div class="panel panel-success">
								<div class="panel panel-heading">
									<h:outputText id="titulo" value="Dados do Pedido"
										style="font-weight: bold;" />
								</div>
								<div class="panel panel-body">
									<div class="form form-group-lg col-md-4">
										<h:outputLabel value="Cliente" styleClass="control-label" />
										<h:selectOneMenu id="client" filter="true"
											styleClass="form-control"
											value="#{orderController.order.client}"
											converter="#{clientConverter}" required="true"
											requiredMessage="O campo 'Cliente' é obrigatório">
											<f:selectItem noSelectionOption="true"
												itemLabel=".:Selecione um cliente:." />
											<f:selectItems value="#{orderController.clients}"
												var="client" itemValue="#{client}"
												itemLabel="#{client.contratante}" />
										</h:selectOneMenu>
									</div>

									<div class="form form-group-lg col-md-4">
										<h:outputLabel value="Cerimonial" styleClass="control-label" />
										<h:selectOneMenu styleClass="form-control" id="ceremonial"
											filter="true" value="#{orderController.order.ceremonial}"
											converter="#{ceremonialConverter}" required="true"
											requiredMessage="O campo 'Cerimonial' é obrigatório">
											<f:selectItem noSelectionOption="true"
												itemLabel=".:Selecione um cerimonial:." />
											<f:selectItems value="#{orderController.ceremonials}"
												var="ce" itemValue="#{ce}" itemLabel="#{ce.nome}" />
										</h:selectOneMenu>
									</div>
									<div class="form form-group-lg col-md-4">
										<h:outputLabel id="valorLabel" value="Valor:"
											styleClass="control-label" />
										<h:inputText styleClass="form-control" p:type="number"
											value="#{orderController.order.valorTotal}">
											<f:convertNumber minFractionDigits="2" />
										</h:inputText>
									</div>
									<div class="col-md-12">
										<br></br> <br></br>
									</div>
									<div class="form form-group-lg col-md-4">
										<h:outputLabel id="pedidoLabel" value="Data do Pedido:"
											styleClass="control-label" />
										<h:inputText styleClass="form-control" id="datapedido"
											p:type="date" value="#{orderController.order.dataPedido}">
											<f:convertDateTime pattern="yyyy-MM-dd" />
										</h:inputText>
									</div>

									<div class="form form-group-lg col-md-4">
										<h:outputLabel id="entregaLabel" value="Data da Entrega:"
											styleClass="control-label" />

										<h:inputText styleClass="form-control" id="entrega"
											p:type="date" value="#{orderController.order.dataEntrega}">
											<f:convertDateTime pattern="yyyy-MM-dd" />
										</h:inputText>
									</div>
								</div>
							</div>

							<div class="panel panel-success">
								<div class="panel panel-heading">
									<h:outputText id="titulo1" value="Endereço Entrega"
										style="font-weight: bold;" />
								</div>
								<div class="panel panel-body">
									<div class="form form-group-lg col-md-4">
										<h:outputLabel value="CEP" styleClass="control-label col-sm-2" />
										<h:inputText
											value="#{orderController.order.enderecoEntrega.cep}"
											styleClass="form-control" />
									</div>
									<div class="form form-group-lg col-md-8">
										<h:outputLabel value="Logradouro"
											styleClass="control-label col-sm-2" />
										<h:inputText
											value="#{orderController.order.enderecoEntrega.logradouro}"
											styleClass="form-control" />
									</div>
									<div class="col-md-12">
										<br></br> <br></br>
									</div>
									<div class="form form-group-lg col-md-4">
										<h:outputLabel value="Complemento"
											styleClass="control-label col-sm-2" />
										<h:inputText
											value="#{orderController.order.enderecoEntrega.complemento}"
											styleClass="form-control" />
									</div>
									<div class="form form-group-lg col-md-4">
										<h:outputLabel value="Bairro"
											styleClass="control-label col-sm-2" />
										<h:inputText
											value="#{orderController.order.enderecoEntrega.bairro}"
											styleClass="form-control" />
									</div>
									<div class="form form-group-lg col-md-4">
										<h:outputLabel value="Numero"
											styleClass="control-label col-sm-2" />
										<h:inputText
											value="#{orderController.order.enderecoEntrega.numero}"
											styleClass="form-control" />
									</div>
								</div>
							</div>

							<div class="panel panel-success">
								<div class="panel panel-heading">
									<h:outputText id="titulo2" value="Item Pedido"
										style="font-weight: bold;" />
								</div>
								<h:form id="formulario2">
									<div class="panel panel-body">
										<div class="form form-group-lg col-md-4">
											<h:outputLabel for="product" value="Produto:" />
											<h:selectOneMenu styleClass="form-control" id="product"
												filter="true" value="#{orderController.item.product}"
												converter="#{productConverter}" required="true"
												requiredMessage="O campo 'Produto' é obrigatório">
												<f:selectItem noSelectionOption="true"
													itemLabel="Selecione um produto " />
												<f:selectItems value="#{orderController.products}"
													var="product" itemValue="#{product}"
													itemLabel="#{product.descricao}" />
											</h:selectOneMenu>
										</div>

										<div class="form form-group-lg col-md-4">
											<h:outputLabel for="order" value="Pedido:" />
											<h:selectOneMenu styleClass="form-control" id="order" filter="true"
												value="#{orderController.item.order}"
												converter="#{orderConverter}" required="true"
												requiredMessage="O campo 'Pedido' é obrigatório">
												<f:selectItem noSelectionOption="true"
													itemLabel="Selecione um pedido " />
												<f:selectItems value="#{orderController.orders}" var="order"
													itemValue="#{order}" itemLabel="#{order.client.nome}" />
											</h:selectOneMenu>
										</div>

										<div class="form form-group-lg col-md-4">
											<h:outputLabel for="embrulho" value="Embrulho:" />
											<h:selectOneMenu styleClass="form-control" id="embrulho"
												filter="true" value="#{orderController.item.embrulho}"
												converter="#{packageConverter}" required="true"
												requiredMessage="O campo 'Embrulho' é obrigatório">
												<f:selectItem noSelectionOption="true"
													itemLabel="Selecione um embrulho" />
												<f:selectItems value="#{orderController.embrulhos}"
													var="embrulho" itemValue="#{embrulho}"
													itemLabel="#{embrulho.descricao}" />
											</h:selectOneMenu>
										</div>
										<div class="form form-group-lg col-md-4">
											<h:outputLabel value="Valor Embrulho:" />
											<h:inputText styleClass="form-control"
												value="#{orderController.item.valorEmbrulho}">
												<f:convertNumber minFractionDigits="2" />
											</h:inputText>
										</div>
										<div class="col-md-12">
											<br></br> <br></br>
										</div>
										<div class="form form-group-lg col-md-4">
											<h:outputLabel value="Valor Produto:" />
											<h:inputText styleClass="form-control"
												value="#{orderController.item.valorProduto}">
												<f:convertNumber minFractionDigits="2" />
											</h:inputText>
										</div>
										<div class="form form-group-lg col-md-4">
											<h:outputLabel value="Quantidade" />
											<h:inputText styleClass="form-control"
												value="#{orderController.item.quantidade}" />
										</div>
										<div class="col-md-12">
											<br></br> <br></br>
										</div>
										<div class="form form-group-lg col-md-4">
											<h:commandButton styleClass="btn btn-success btn-lg"
												actionListener="#{orderController.adicionarPedido()}"
												value="Adicionar no Carrinho" title="Adicionar">
												<f:ajax execute="@form" render="@form" />
											</h:commandButton>
										</div>
										<div class="col-md-12">
										
												<h:dataTable id="tabela2"
													value="#{orderController.order.itens}" var="o"
													styleClass="dados-os table table-striped table-bordered table-hover">
													<h:column>
														<f:facet name="header">
															<h:outputText id="headerCodigo" value="Codigo" />
														</f:facet>
														<h:outputText id="valorCodigo" value="#{o.id}" />
													</h:column>
													<h:column>
														<f:facet name="header">
															<h:outputText id="headerProduto" value="Produto" />
														</f:facet>
														<h:outputText id="valorProduto"
															value="#{o.product.descricao}" />
													</h:column>
													<h:column>
														<f:facet name="header">
															<h:outputText id="headerProdutoValor"
																value="Valor do Produto" />
														</f:facet>
														<h:outputText id="valorProdutoValor"
															value="#{o.product.valor}" />
													</h:column>
													<h:column>
														<f:facet name="header">
															<h:outputText id="headerEmbrulhoValor"
																value="Valor do Embrulho" />
														</f:facet>
														<h:outputText id="valorEmbrulho"
															value="#{o.embrulho.valorPackage}" />
													</h:column>
													<h:column>
														<f:facet name="header">
															<h:outputText id="headerQtd" value="Quantidade" />
														</f:facet>
														<h:outputText id="Qtd" value="#{o.quantidade}" />
													</h:column>
													<h:column>
														<f:facet name="header">
															<h:outputText id="Ação" value="Ação" />
														</f:facet>
														<h:commandButton action="#{orderController.editar(o)}"
															value="Editar">
															<f:ajax render="formulario2"></f:ajax>
														</h:commandButton>
														<h:commandButton action="#{orderController.remove(o)}"
															value="Excluir">
															<f:ajax render="tabela:tabela2"></f:ajax>
														</h:commandButton>
													</h:column>
												</h:dataTable>
											
										</div>
									</div>
								</h:form>
							</div>

							<div class="panel panel-success">
								<div class="panel panel-heading">
									<h:outputText id="titulo3" value="Pagamento"
										style="font-weight: bold;" />
								</div>
								<div class="panel panel-body">
									<div class="form form-group-lg col-md-4">
										<h:outputLabel value="Valor a ser pago"
											styleClass="control-label" />
										<h:inputText value="#{paymentController.payment.valor}"
											styleClass="form-control" />
									</div>
									<div class="form form-group-lg col-md-4">
										<h:outputLabel value="Data Pagamento"
											styleClass="control-label" />
										<h:inputText p:type="date" styleClass="form-control"
											value="#{paymentController.payment.dataPagamento}" />
									</div>

								</div>
							</div>
							<div class="form form-group-lg col-md-4">
								<h:commandButton action="#{orderController.save}" value="Salvar"
									class="btn btn-success btn-lg" />
								<h:commandButton rendered="#{orderController.modoEdicao}"
									action="#{orderController.cancelar}" value="Cancelar"
									styleClass="btn btn-danger btn-lg" />
							</div>
						</h:form>
					</div>
				</div>
				<script src="../resources/js/jquery-2.1.4.min.js"></script>
				<script src="../resources/js/bootstrap.min.js"></script>
				<script src="../resources/js/bootstrap-datepicker.min.js"></script>
				<script src="../resources/js/bootstrap-datepicker.pt-BR.min.js"></script>
				<script src="../resources/js/main.js"></script>
			</ui:define>
		</div>
	</ui:composition>
</h:body>
</html>